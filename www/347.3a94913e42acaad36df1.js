(self.webpackChunkapp=self.webpackChunkapp||[]).push([[347],{347:(t,i,e)=>{"use strict";e.r(i),e.d(i,{Tab3PageModule:()=>T});var o=e(2859),n=e(3256),r=e(8583),a=e(3679),c=e(4762),s=e(3018),l=e(910),u=e(5623),p=e(932),d=e(4362),g=e(2662),h=e(7349);function m(t,i){if(1&t&&(s.TgZ(0,"ion-select-option",15),s._uU(1),s.qZA()),2&t){const t=i.$implicit;s.Q6J("value",t.uid),s.xp6(1),s.Oqu(t.first_name+" "+t.last_name)}}function Z(t,i){if(1&t&&(s.TgZ(0,"ion-list",16),s.TgZ(1,"ion-list-header"),s.TgZ(2,"ion-label",17),s.TgZ(3,"strong"),s._uU(4,"Al completar la barra el envio es !!GRATIS!!"),s.qZA(),s.qZA(),s.qZA(),s._UZ(5,"ion-progress-bar",15),s.qZA()),2&t){const t=s.oxw(2);s.xp6(5),s.Q6J("value",t.freeShipping)}}function f(t,i){if(1&t){const t=s.EpF();s.TgZ(0,"ion-item"),s.TgZ(1,"ion-grid",18),s.TgZ(2,"ion-row"),s.TgZ(3,"ion-col",19),s._UZ(4,"img",20),s.ALo(5,"invProductos"),s.qZA(),s.TgZ(6,"ion-col",21),s.TgZ(7,"h4",22),s._uU(8),s.qZA(),s.TgZ(9,"ion-row",23),s.TgZ(10,"ion-icon",24),s.NdJ("click",function(){const i=s.CHM(t).index;return s.oxw(2).lessQty(i)}),s.qZA(),s.TgZ(11,"span",25),s._uU(12),s.qZA(),s.TgZ(13,"ion-icon",26),s.NdJ("click",function(){const i=s.CHM(t).index;return s.oxw(2).addQty(i)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"ion-col",27),s._UZ(15,"ion-icon",28),s.TgZ(16,"p",29),s._uU(17),s.qZA(),s.TgZ(18,"h4",30),s._uU(19),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=i.$implicit;s.xp6(4),s.Q6J("src",s.lcZ(5,6,t.product_id.img[0]),s.LSH),s.xp6(4),s.hij(" ",null==t?null:t.product_id.nombre," "),s.xp6(4),s.Oqu(null==t?null:t.quantity),s.xp6(5),s.AsE(" ",null==t?null:t.sale_price," X ",null==t?null:t.quantity," "),s.xp6(2),s.hij(" $RD ",(null==t?null:t.sale_price)*(null==t?null:t.quantity)," ")}}function v(t,i){if(1&t){const t=s.EpF();s.TgZ(0,"div",4),s.TgZ(1,"ion-item"),s.TgZ(2,"ion-label"),s._uU(3,"Escoja cliente:"),s.qZA(),s.TgZ(4,"ion-select",5),s.NdJ("ngModelChange",function(i){return s.CHM(t),s.oxw().cliente=i}),s.YNc(5,m,2,2,"ion-select-option",6),s.qZA(),s.qZA(),s.YNc(6,Z,6,1,"ion-list",7),s.TgZ(7,"ion-list"),s.YNc(8,f,20,8,"ion-item",8),s.qZA(),s.TgZ(9,"div",9),s.TgZ(10,"ion-grid"),s.TgZ(11,"ion-row"),s.TgZ(12,"ion-col",10),s.TgZ(13,"small",11),s._uU(14),s.ALo(15,"translate"),s.qZA(),s.TgZ(16,"ion-text",12),s.TgZ(17,"h1",13),s._uU(18),s.qZA(),s.qZA(),s.TgZ(19,"small",11),s._uU(20),s.ALo(21,"translate"),s.qZA(),s.TgZ(22,"ion-text",12),s.TgZ(23,"h1",13),s._uU(24),s.qZA(),s.qZA(),s.qZA(),s.TgZ(25,"ion-col",10),s.TgZ(26,"ion-button",14),s.NdJ("click",function(){return s.CHM(t),s.oxw().solicitarProducto()}),s._uU(27),s.ALo(28,"translate"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(4),s.Q6J("ngModel",t.cliente),s.xp6(1),s.Q6J("ngForOf",t.clientes),s.xp6(1),s.Q6J("ngIf",0!==t.cart.length&&0!==t.envio),s.xp6(2),s.Q6J("ngForOf",t.cart),s.xp6(6),s.Oqu(s.lcZ(15,9,"Costo env\xedo")),s.xp6(4),s.hij("$RD ",t.envio,""),s.xp6(2),s.Oqu(s.lcZ(21,11,"Total")),s.xp6(4),s.hij("$RD ",t.total,""),s.xp6(3),s.hij(" ",s.lcZ(28,13,"Hacer Pedido")," ")}}function x(t,i){1&t&&(s.TgZ(0,"div",31),s._UZ(1,"img",32),s.TgZ(2,"h4",33),s._uU(3),s.ALo(4,"translate"),s.qZA(),s._UZ(5,"br"),s.TgZ(6,"div",34),s.TgZ(7,"ion-button",35),s._uU(8),s.ALo(9,"translate"),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(3),s.hij("",s.lcZ(4,2,"Carrito Vac\xedo"),"!"),s.xp6(5),s.Oqu(s.lcZ(9,4,"Empieza a vender")))}let _=(()=>{class t{constructor(t,i,e,o,n,r){this.toastController=t,this.alertController=i,this.cartServ=e,this.uiService=o,this.clientesServ=n,this.pedido=r,this.envio=250,this.cart=[],this.total=0,this.freeShipping=0}ngOnInit(){this.cartServ.nuevoCarrito.subscribe(t=>{this.cart.unshift(t)}),this.miCarrito(),this.misCLientes()}miCarrito(){this.cartServ.getCarrito().subscribe(t=>{console.log(t.data),!0===t.ok&&(this.cart=t.data,this.calculaTotal())})}misCLientes(){this.clientesServ.getClientes().subscribe(t=>{console.log(t),!0===t.ok&&(this.clientes=t.data)})}calculaTotal(){this.total=this.envio;let t=0;this.cart.forEach(i=>{t+=i.quantity*(i.product_id.precio-i.product_id.precio_compra),Number(t)<=Number(1200)?(this.freeShipping=t/1200,this.envio=250):this.envio=0;const e=Number(i.sale_price)*i.quantity;this.total+=e})}lessQty(t){this.cart[t].quantity>1&&(this.cart[t].quantity=this.cart[t].quantity-1,this.calculaTotal())}addQty(t){this.cart[t].quantity=this.cart[t].quantity+1,this.calculaTotal()}borrarProductoCarrito(t){return(0,c.mG)(this,void 0,void 0,function*(){const i=yield this.alertController.create({header:"Borrar producto",mode:"ios",message:"<strong>Esta seguro de eliminar este producto del carrito?</strong>!!!",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Borrar",handler:()=>{this.borrarProducto(t)}}]});yield i.present()})}borrarProducto(t){this.cartServ.borrarProductoCart(t).subscribe(t=>{!0===t.ok&&(this.miCarrito(),this.cartServ.productoCarritoBorrado.emit(null))})}solicitarProducto(){if(void 0===this.cliente)return void this.uiService.alertaInformativa("!!!ERROR!!!","Debe especificar el cliente.");if(0===this.cart.length)return void this.uiService.alertaInformativa("!!!ERROR!!!","El carrito esta vac\xedo");const t=this.cart.map(t=>({_id:t.uid}));this.pedido.crearPedido({cliente:this.cliente,costoEnvio:this.envio,cart:t}).subscribe(t=>{let i=t.data;!0===t.ok&&(this.cart=[],this.cartServ.productoCarritoVaciado.emit(null),this.uiService.alertaInformativaCerrar(`PEDIDO ${i.uid} REALIZADO`,"Comuniquese con el administrador para los detalles del env\xedo"))})}toastAlert(t,i){return(0,c.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:t,duration:1500})).present(),this.cart.splice(i,1)})}}return t.\u0275fac=function(i){return new(i||t)(s.Y36(o.yF),s.Y36(o.Br),s.Y36(l.N),s.Y36(u.y),s.Y36(p.$),s.Y36(d.V))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-tab3"]],decls:9,vars:6,consts:[[1,"ion-padding"],["scroll","false","no-padding","",3,"fullscreen"],["class","cart ion-padding-top",4,"ngIf"],["class","empty-cart animate__animated animate__fadeIn animate__faster",4,"ngIf"],[1,"cart","ion-padding-top"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["style","margin-bottom: 15px;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"bottom-bar","animate__animated","animate__fadeIn","animate__faster"],["size","6"],[1,"text-muted","ion-text-uppercase","no-gap"],["color","dark"],[1,"no-gap"],["color","primary","size","large","expand","block",1,"ion-text-uppercase",3,"click"],[3,"value"],[2,"margin-bottom","15px"],[2,"font-size","16px"],[1,"animate__animated","animate__slideInUp","animate__faster"],["size","4"],[1,"round-edge",3,"src"],["size","5"],["routerLink","/single-product-view",1,"text-oflow-lg","no-gap"],[1,"ion-margin-top"],["size","small","name","remove-circle-outline",3,"click"],[1,"qty-padding"],["size","small","name","add-circle-outline",3,"click"],["size","3",1,"ion-text-right"],["name","trash-outline",1,"ion-text-right","text-muted","ion-margin-bottom"],[1,"ion-text-uppercase","no-gap","x-small","ion-margin-top","text-muted"],[1,"ion-text-right","no-gap"],[1,"empty-cart","animate__animated","animate__fadeIn","animate__faster"],["src","../../../assets/empty-cart.svg","alt",""],[1,"text-muted","ion-text-center"],[1,"ion-text-center"],["color","primary","routerLink","/home","shape","round",1,"ion-text-uppercase"]],template:function(t,i){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-item"),s.TgZ(2,"ion-label",0),s.TgZ(3,"h1"),s._uU(4),s.ALo(5,"translate"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"ion-content",1),s.YNc(7,v,29,15,"div",2),s.YNc(8,x,10,6,"div",3),s.qZA()),2&t&&(s.xp6(4),s.Oqu(s.lcZ(5,4,"Mi Carrito")),s.xp6(2),s.Q6J("fullscreen",!0),s.xp6(1),s.Q6J("ngIf",i.cart.length>0),s.xp6(1),s.Q6J("ngIf",0==i.cart.length))},directives:[o.Gu,o.Ie,o.Q$,o.W2,r.O5,o.t9,o.QI,a.JJ,a.On,r.sg,o.q_,o.jY,o.Nd,o.wI,o.yW,o.YG,o.n0,o.yh,o.X7,o.YI,n.rH,o.gu],pipes:[g.X$,h.v],styles:[".empty-cart[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin:45% auto 0}.qty-padding[_ngcontent-%COMP%]{padding:0 12px!important}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.x-small[_ngcontent-%COMP%]{font-size:x-small!important}.no-gap[_ngcontent-%COMP%]{padding:0!important;margin:0!important}.text-oflow-lg[_ngcontent-%COMP%]{display:inline-block}.round-edge[_ngcontent-%COMP%]{border-radius:8px!important;overflow:hidden;box-shadow:0 1px 9px #00000026!important}ion-icon[_ngcontent-%COMP%]{font-size:24px}.bottom-bar[_ngcontent-%COMP%]{position:fixed;width:100%;bottom:0;background-color:#fff;z-index:999}ion-progress-bar[_ngcontent-%COMP%]{height:20px;border-radius:3px;width:90%;margin:auto}"]}),t})();const q=[{path:"",component:_}];let A=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[n.Bz.forChild(q)],n.Bz]}),t})();var C=e(5503);let T=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.Pc,C.D,r.ez,a.u5,n.Bz.forChild([{path:"",component:_}]),A,g.aw]]}),t})()},7349:(t,i,e)=>{"use strict";e.d(i,{v:()=>a});var o=e(2340),n=e(3018);const r=o.N.urlImagen;let a=(()=>{class t{transform(t){return null===t||""===t||"[]"==t?"../assets/empty-image.png":`${r}/${t}`}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=n.Yjl({name:"invProductos",type:t,pure:!0}),t})()},5503:(t,i,e)=>{"use strict";e.d(i,{D:()=>r});var o=e(8583),n=e(3018);let r=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[o.ez]]}),t})()},910:(t,i,e)=>{"use strict";e.d(i,{N:()=>s});var o=e(3018),n=e(2340),r=e(1841),a=e(5763);const c=n.N.url;let s=(()=>{class t{constructor(t,i){this.http=t,this.usuarioService=i,this.paginaPosts=0,this.nuevoCarrito=new o.vpe,this.carritoVaciado=new o.vpe,this.productoCarritoBorrado=new o.vpe,this.productoCarritoVaciado=new o.vpe}getCarrito(){return this.http.get(`${c}/carrito`)}crearCarrito(t){return this.http.post(`${c}/carrito`,t)}borrarProductoCart(t){return this.http.delete(`${c}/carrito/${t}`)}vaciarCarrito(t){return this.http.put(`${c}/carrito/massive`,t)}}return t.\u0275fac=function(i){return new(i||t)(o.LFG(r.eN),o.LFG(a.i))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);