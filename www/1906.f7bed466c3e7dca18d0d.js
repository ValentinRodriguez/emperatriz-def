(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1906],{8404:(t,i,e)=>{"use strict";e.d(i,{s:()=>c});var o=e(3018),n=e(5623),a=e(3256),r=e(910),s=e(2859);let c=(()=>{class t{constructor(t,i,e,o){this.uiservice=t,this.router=i,this.cartService=e,this.applicationRef=o,this.cantidad=0}ngOnInit(){this.cartService.nuevoCarrito.subscribe(t=>{this.cantidad+=1,this.applicationRef.tick()}),this.cartService.productoCarritoBorrado.subscribe(()=>{this.cantidad-=1,this.applicationRef.tick()}),this.cartService.productoCarritoVaciado.subscribe(()=>{this.cantidad=0}),this.cartService.getCarrito().subscribe(t=>{this.cantidad=t.data.length})}irCarrito(){this.router.navigateByUrl("/home/tabs/tab3")}regresar(){this.uiservice.regresar()}}return t.\u0275fac=function(i){return new(i||t)(o.Y36(n.y),o.Y36(a.F0),o.Y36(r.N),o.Y36(o.z2F))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-header-modal"]],decls:6,vars:0,consts:[[1,"top-bar","animate__animated","animate__fadeIn","animate__faster"],["size","6",1,"ion-text-left","ion-padding",3,"click"],[1,"no-gap"],["color","dark","name","chevron-back-outline"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"ion-grid"),o.TgZ(2,"ion-row"),o.TgZ(3,"ion-col",1),o.NdJ("click",function(){return i.regresar()}),o.TgZ(4,"h1",2),o._UZ(5,"ion-icon",3),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA())},directives:[s.jY,s.Nd,s.wI,s.gu],styles:["ion-badge[_ngcontent-%COMP%]{position:absolute;right:10px;z-index:1}.no-gap[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:15px;font-size:30px}"]}),t})()},1906:(t,i,e)=>{"use strict";e.r(i),e.d(i,{SingleProductViewPageModule:()=>m});var o=e(8583),n=e(3679),a=e(2859),r=e(3256),s=e(2666),c=e(3018);const l=[{path:"",component:s.p}];let d=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.Bz.forChild(l)],r.Bz]}),t})();var p=e(2662),g=e(5642),u=e(5503);let m=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.ez,g.K,n.u5,u.D,a.Pc,d,p.aw]]}),t})()},2666:(t,i,e)=>{"use strict";e.d(i,{p:()=>_});var o=e(4762),n=e(3018),a=e(5623),r=e(3256),s=e(5763),c=e(910),l=e(2859),d=e(8404),p=e(8583),g=e(2662),u=e(7349);function m(t,i){if(1&t&&(n.TgZ(0,"ion-slide",36),n.TgZ(1,"ion-col"),n._UZ(2,"ion-img",37),n.ALo(3,"invProductos"),n.qZA(),n.qZA()),2&t){const t=i.$implicit;n.xp6(2),n.Q6J("src",n.lcZ(3,1,t))}}function Z(t,i){if(1&t&&(n.TgZ(0,"ion-text",11),n._uU(1),n.qZA()),2&t){const t=n.oxw();n.xp6(1),n.hij("-($RD ",t.detalles.descuento,")")}}const h=function(){return{slidesPerView:"auto",zoom:!1,grabCursor:!0}};let _=(()=>{class t{constructor(t,i,e,o){this.uiService=t,this.activeRoute=i,this.usuario=e,this.carrito=o,this.data=null,this.cargando=!1,this.chosen=!0,this.solicitados=[],this.maxDiscount=0,this.slideOptActores={slidesPerView:3.3,freeMode:!0,spaceBetween:0},this.relatedProducts=[],this.detalles={img_poster:null,precio_venta:null,mi_precio:null,descuento:0,ganancia:null,disponibilidad:null,codigo:null,entrega:null,descHtml:null}}ngOnInit(){this.data=this.activeRoute.snapshot.paramMap.get("data"),this.seller=this.activeRoute.snapshot.paramMap.get("seller"),this.cliente=this.usuario.getUsuario(),this.detalleArticulo(this.product),console.log(this.product)}copiaCodigo(t){console.log(t)}changeImage(t,i){document.getElementById(t.id).classList.add("chosen"),this.detalles.img_poster=t.src}detalleArticulo(t){this.detalles.img_poster=t.img,this.detalles.precio_venta=Math.round(t.precio);const i=t.precio*Number(t.ganancia)/100;this.detalles.ganancia=Math.round(i),this.maxDiscount=this.detalles.ganancia,this.detalles.mi_precio=this.detalles.precio_venta-this.detalles.ganancia,this.detalles.disponibilidad=t.stock_quantity,this.detalles.codigo=t.uid,this.detalles.descHtml=t.descripcion,this.detalles.entrega=null==t.envios?"No especificado":t.envios.descripcion}agregarAlCarrito(){this.carrito.crearCarrito({shipping_id:this.product.envios._id,product_id:this.product.uid,sale_price:this.detalles.mi_precio+(this.detalles.ganancia-this.detalles.descuento)}).subscribe(t=>{!0===t.ok&&(this.uiService.presentToast("Producto agregado al carrito"),this.carrito.nuevoCarrito.emit(t.carrito)),"existe"===t.ok&&this.uiService.presentToastError(t.msg)})}compartir(){return(0,o.mG)(this,void 0,void 0,function*(){let t=[];this.product.img.forEach(i=>(0,o.mG)(this,void 0,void 0,function*(){const e=i.split("/"),o=e[e.length-1],n=yield fetch(`${URL}/${i}`),a=yield n.blob();t.push(new File([a],o,{type:"image/jpeg",lastModified:(new Date).getTime()}))})),setTimeout(()=>{},3e3)})}SetDiscount(t){console.log(t.target.value),this.detalles.descuento=Number(t.target.value),console.log(this.detalles.descuento)}regresarPagina(){this.uiService.regresarPagina()}regresar(){this.uiService.regresar()}}return t.\u0275fac=function(i){return new(i||t)(n.Y36(a.y),n.Y36(r.gz),n.Y36(s.i),n.Y36(c.N))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-single-product-view"]],inputs:{product:"product"},decls:76,vars:21,consts:[[3,"fullscreen"],[1,"noticia-more"],["fill","clear",3,"click"],["slot","icon-only","name","logo-whatsapp","color","success"],[1,"animate__animated","animate__fadeIn","animate__faster"],[3,"options"],["class","product-view",4,"ngFor","ngForOf"],[1,"ion-padding","animate__animated","animate__fadeIn","animate__faster"],[1,"bottom-bar-space"],[1,"no-gap"],["color","dark"],["color","danger"],["color","danger",2,"font-size","15px"],["color","primary",2,"font-size","25px"],["slot","start","name","logo-usd","color","primary"],[1,"text-size"],["slot","end","color","primary","id","precio_venta",1,"text-size"],["slot","end","color","primary","id","ganancia",1,"text-size"],["color","danger",4,"ngIf"],["min","0","pin","","color","primary","value","0","step","5",3,"max","ionChange"],["slot","start","name","remove-circle-outline"],["slot","end","name","add-circle-outline"],["slot","start","name","podium","color","primary"],["slot","end","color","primary","id","disponibilidad",1,"text-size"],[3,"click"],["slot","start","name","barcode","color","primary"],["slot","end","color","primary","id","codigo",2,"font-size","17px"],["slot","start","name","hourglass","color","primary"],["slot","end","color","primary","id","entrega",1,"text-size"],[1,"ion-padding-top"],[1,"no-gap","ion-text-uppercase"],[1,"ion-text-start","text-muted","no-gap","ion-text-justify"],[1,"bottom-bar","animate__animated","animate__slideInUp","animate__faster"],["size","12"],["color","dark","size","large","expand","block",1,"ion-text-uppercase","small",3,"click"],["slot","icon-only","name","bag-handle-outline"],[1,"product-view"],[1,"card-image",3,"src"]],template:function(t,i){1&t&&(n.TgZ(0,"ion-content",0),n._UZ(1,"app-header-modal"),n.TgZ(2,"div",1),n.TgZ(3,"ion-button",2),n.NdJ("click",function(){return i.compartir()}),n._UZ(4,"ion-icon",3),n.qZA(),n.qZA(),n.TgZ(5,"ion-grid",4),n.TgZ(6,"ion-slides",5),n.YNc(7,m,4,3,"ion-slide",6),n.qZA(),n.qZA(),n.TgZ(8,"div",7),n.TgZ(9,"ion-grid",8),n.TgZ(10,"ion-row"),n.TgZ(11,"ion-col",9),n.TgZ(12,"ion-text",10),n.TgZ(13,"h4",9),n._uU(14),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"ion-row"),n.TgZ(16,"ion-col",9),n.TgZ(17,"ion-chip",11),n.TgZ(18,"ion-text",12),n._uU(19),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(20,"ion-row"),n.TgZ(21,"ion-col",9),n.TgZ(22,"ion-list"),n.TgZ(23,"ion-item"),n.TgZ(24,"ion-label",13),n._uU(25),n.qZA(),n.qZA(),n.TgZ(26,"ion-item"),n._UZ(27,"ion-icon",14),n.TgZ(28,"ion-label",15),n._uU(29,"Precio:"),n.qZA(),n.TgZ(30,"ion-note",16),n._uU(31),n.qZA(),n.qZA(),n.TgZ(32,"ion-item"),n._UZ(33,"ion-icon",14),n.TgZ(34,"ion-label",15),n._uU(35,"Ganancia:"),n.qZA(),n.TgZ(36,"ion-note",17),n._uU(37),n.YNc(38,Z,2,1,"ion-text",18),n.qZA(),n.qZA(),n.TgZ(39,"ion-item"),n._UZ(40,"ion-icon",14),n.TgZ(41,"ion-range",19),n.NdJ("ionChange",function(t){return i.SetDiscount(t)}),n._UZ(42,"ion-icon",20),n._UZ(43,"ion-icon",21),n.qZA(),n.qZA(),n.TgZ(44,"ion-item"),n._UZ(45,"ion-icon",22),n.TgZ(46,"ion-label",15),n._uU(47,"Disponibles:"),n.qZA(),n.TgZ(48,"ion-note",23),n._uU(49),n.qZA(),n.qZA(),n.TgZ(50,"ion-item",24),n.NdJ("click",function(){return i.copiaCodigo(i.detalles.codigo)}),n._UZ(51,"ion-icon",25),n.TgZ(52,"ion-note",26),n._uU(53),n.ALo(54,"uppercase"),n.qZA(),n.qZA(),n.TgZ(55,"ion-item"),n._UZ(56,"ion-icon",27),n.TgZ(57,"ion-label",15),n._uU(58,"Entrega:"),n.qZA(),n.TgZ(59,"ion-note",28),n._uU(60),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(61,"ion-row",29),n.TgZ(62,"ion-col",9),n.TgZ(63,"ion-text",10),n.TgZ(64,"h4",30),n._uU(65),n.ALo(66,"translate"),n.qZA(),n.TgZ(67,"p",31),n._uU(68),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(69,"div",32),n.TgZ(70,"ion-grid"),n.TgZ(71,"ion-row"),n.TgZ(72,"ion-col",33),n.TgZ(73,"ion-button",34),n.NdJ("click",function(){return i.agregarAlCarrito()}),n._UZ(74,"ion-icon",35),n._uU(75),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.Q6J("fullscreen",!0),n.xp6(6),n.Q6J("options",n.DdM(20,h)),n.xp6(1),n.Q6J("ngForOf",i.product.img),n.xp6(7),n.Oqu(i.product.nombre),n.xp6(5),n.Oqu(i.product.categoria.descripcion),n.xp6(6),n.Oqu(i.product.name),n.xp6(6),n.hij("$RD ",i.detalles.mi_precio+(i.detalles.ganancia-i.detalles.descuento),""),n.xp6(6),n.hij(" $RD ",i.detalles.ganancia-i.detalles.descuento," "),n.xp6(1),n.Q6J("ngIf",0!==i.detalles.descuento),n.xp6(3),n.Q6J("max",i.maxDiscount),n.xp6(8),n.Oqu(i.detalles.disponibilidad),n.xp6(4),n.Oqu(n.lcZ(54,16,i.detalles.codigo)),n.xp6(7),n.Oqu(i.detalles.entrega),n.xp6(5),n.Oqu(n.lcZ(66,18,"Descripci\xf3n")),n.xp6(3),n.Oqu(i.product.descripcion),n.xp6(7),n.hij("","Agregar al carrito"," "))},directives:[l.W2,d.s,l.YG,l.gu,l.jY,l.Hr,p.sg,l.Nd,l.wI,l.yW,l.hM,l.q_,l.Ie,l.Q$,l.uN,p.O5,l.I_,l.QI,l.A$,l.Xz],pipes:[p.gd,g.X$,u.v],styles:[".right-space[_ngcontent-%COMP%]{margin-right:12px}.verticalLine[_ngcontent-%COMP%]{border-right:1px solid #00000080}.product-view[_ngcontent-%COMP%]{width:350px;height:350px;border:2px solid #f8f8f8}.card-image[_ngcontent-%COMP%]{pointer-events:none}.no-gap[_ngcontent-%COMP%]{padding:0!important;margin:0!important}.x-small[_ngcontent-%COMP%]{font-size:x-small}.small[_ngcontent-%COMP%]{font-size:small}.xx-small[_ngcontent-%COMP%]{font-size:xx-small}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.text-size[_ngcontent-%COMP%]{font-size:20px}.bottom-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;background-color:#fff}.bottom-bar[_ngcontent-%COMP%], .top-bar[_ngcontent-%COMP%]{width:100%;z-index:999}.top-bar[_ngcontent-%COMP%]{position:absolute;top:0;background-color:initial}.bottom-bar-space[_ngcontent-%COMP%]{padding-bottom:80px}.sm-cards[_ngcontent-%COMP%]{width:150px;height:240px;border:2px solid #f8f8f8}.fav_icon[_ngcontent-%COMP%]{font-size:24px;float:right}.noticia-more[_ngcontent-%COMP%]{font-size:25px!important;position:absolute;right:-2px;top:-3px}.text-oflow-sm[_ngcontent-%COMP%]{display:inline-block;width:135px;white-space:nowrap;overflow:hidden!important;text-overflow:ellipsis}"]}),t})()},7349:(t,i,e)=>{"use strict";e.d(i,{v:()=>r});var o=e(2340),n=e(3018);const a=o.N.urlImagen;let r=(()=>{class t{transform(t){return null===t||""===t||"[]"==t?"../assets/empty-image.png":`${a}/${t}`}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=n.Yjl({name:"invProductos",type:t,pure:!0}),t})()}}]);